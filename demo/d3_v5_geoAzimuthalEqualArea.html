<!---
layout: demo
--->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>d3-geo</title>
    <script src="https://cdn.bootcss.com/d3/5.9.7/d3.js"></script>
    <style>
      arction {
        display: flex;
      }
    </style>
  </head>
  <body>
    <arction>
        <section>
          <h6>d3.geoAzimuthalEqualArea()</h6>
          <svg id="demo1"></svg>
        </section>
        <section>
          <h6>d3.geoAzimuthalEquidistant()</h6>
          <svg id="demo2"></svg>
        </section>
        <section>
          <h6>d3.geoGnomonic()</h6>
          <svg id="demo3"></svg>
        </section>
    </arction>
    <script>
      d3.json("datas/world.json").then(function(data) {
        var width = 300;
        var height = 300;

        const generateMap = (id, projection) => {
          var svg = d3
            .select(`#${id}`)
            .attr("width", width)
            .attr("height", height);
          var projection = d3[projection]()
            .angle(0)
            .rotate([-90, 0, 0])
            // .fitExtent([[0, 0], [width, height]], data)
            // .fitSize([widtg, 500], data)
            // .fitWidth(height, data)
            .fitHeight(height, data)
            .precision(0.1)
            .clipAngle(179)
            .clipExtent(null)
            // .scale(100)
            // .translate([width / 2, height / 2])
            .center([0, 0]);
          var path = d3.geoPath().projection(projection);
          var color = d3.schemeCategory10;

          // 经纬网
          var graticule = d3.geoGraticule();
          svg
            .append("path")
            .datum(graticule)
            .attr("d", path)
            .attr("fill", "none")
            .attr("stroke", "#777")
            .attr("stroke-width", 0.5)
            .attr("stroke-opacity", 0.5);

          // 地图
          svg
            .append("path")
            .datum(data)
            .attr("d", path)
            .attr("stroke", "#000")
            .attr("stroke-width", 0.5)
            .attr("fill", function(d, i) {
              return color[i];
            });

          svg
            .insert("path")
            .datum(data)
            .attr("d", path)
            .attr("stroke", "#fff")
            .attr("stroke-width", 0.5)
            .attr("fill", "none");
        };

        generateMap('demo1', 'geoAzimuthalEqualArea');
        generateMap('demo2', 'geoAzimuthalEquidistant');
        generateMap('demo3', 'geoGnomonic');
      });
    </script>
  </body>
</html>
